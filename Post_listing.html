<!DOCTYPE html>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<html lang="en">
<link rel="stylesheet" href="about.css">
<div class="about-section">
    <head>
        <link rel="stylesheet" href="main.css">
        <meta charset="utf-8">
        <title>Lucy's Listings</title>
      </head>
      <div class="topnav">
        <a class="active" href="index.html">Lucy's Listings</a>
        <a href="#rent">Find a rental</a>
        <a href="#post">Post a listing</a>
        <a href="#contact">Contact</a>
        <a href="about_page.html">About</a>
      </div>

      <form id='formElem'>
        <label for="fname">First name:</label><br>
        <input type="text" id="fname" name="fname"><br>
        <label for="lname">Last name:</label><br>
        <input type="text" id="lname" name="lname"><br>
        <label for="contact">Contact:</label><br>
        <input type="text" id="contact" name="contact"><br>
        <label for="adress">Address:</label><br>
        <input type="text" id="address" name="address"><br>
        <label for="City ">City:</label><br>
        <input type="text" id="city" name="city"><br>
        <label for="Country ">Country:</label><br>
        <input type="text" id="country" name="country"><br>
        <label for="avb">Availability:</label><br>
        <input type="text" id="Avlb" name="Avlb"><br>
        <label for="bath ">Bathrooms:</label><br>
        <input type="text" id="bathroom" name="bathroom"><br>
        <label for="Beds ">Bedrooms:</label><br>
        <input type="text" id="bedrooms" name="bedrooms"><br>
        <label for="home ">HomeType:</label><br>
        <input type="text" id="home" name="Hometype"><br> 
        <label for="price ">Price:</label><br>
        <input type="price" id="price" name="Price"><br> 
        <label for="desc ">Description:</label><br>
        <input type="desc" id="desc" name="desc"><br> <br>


        <button type="submit">Submit</button>  
      </form>


      <script>
        // get the form element from dom
        const formElement = document.querySelector('form#forms')
    
        // convert the form to JSON
        const getFormJSON = (form) => {
          const data = new FormData(form);
          return Array.from(data.keys()).reduce((result, key) => {
            if (result[key]) {
              result[key] = data.getAll(key)
              return result
            }
            result[key] = data.get(key);
            return result;
          }, {});
        };
    
        // handle the form submission event, prevent default form behaviour, check validity, convert form to JSON
        const handler = (event) => {
          event.preventDefault();
          const valid = formElement.reportValidity();
          if (valid) {
            const result = getFormJSON(formElement);
            // handle one, multiple or no files uploaded
            const images = [result.images].flat().filter((file) => !!file.name)
            // handle one, multiple or no languages selected
            const languages = [result.languages || []].flat();
            // convert the checkbox to a boolean
            const isHappyReader = !!(result.isHappyReader && result.isHappyReader === 'on')
    
            // use spread function, but override the keys we've made changes to
            const output = {
              ...result,
              images,
              languages,
              isHappyReader
            }
            console.log(output)
          }
        }
    
        formElement.addEventListener("submit", handler)
      </script>