<!DOCTYPE html>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<html lang="en">
<!-- <link rel="stylesheet" href="off_campus.css"> -->
<div class="off-section">
    <head>
        <link rel="stylesheet" href="main.css">
        <!-- <link rel="stylesheet" href="off_campus.css"> -->
        <meta charset="utf-8">
        <title>Lucy's Listings</title>
      </head>
        <div class="topnav">
          <a href="index.html">Lucy's Listings</a>
          <a href="On_campus.html">On Campus Housing</a>
          <a class="active" href="Off_campus.html">Off Campus Housing</a>
          <a href="Post_listing.html">Post a listing</a>
          <a href="about_page.html">About</a>
        </div>

            <h2>Off campus housing options</h2>
          
          
            <select name="forma" onchange="location = this.value;">
              <option value="">Select a category to organize by</option>
              <option value="beds.html">Number of Beds</option>
              <option value="bath.html">Number of Bathrooms</option>
              <option value="house.html">House Type</option>
              <option value="Price2.html">Price</option>
             </select>
          
            <body style = "text-align:center;">   
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
            <p id="demo" ></p>
            <script src="off_campus.js"></script>
            <script>
              $(function(){
            $(".fold-table tr.view").on("click", function(){
              $(this).toggleClass("open").next(".fold").toggleClass("open");
            });
            });
            </script>
            <script>
            let text = "<table class='fold-table' class='center' border='2'> <thead>";
            text += "<tr><th>" + "Beds" + "</th><th>" + "Bath" + "</th><th>" + "Price (Per Month)" + "</th><th>" + "House Type" + "</th><th>" + "Address" + "</th>";
            text += '<tbody>'
            for (i = 0; i < off_campus.length; i++)
            {
                var current_obj = off_campus[i];
                var current_json = JSON.stringify(current_obj);
                var parsed_obj = JSON.parse(current_json);
          
                var address_data = current_obj.address;
                var address_json = JSON.stringify(address_data);
                var parsed_addresses = JSON.parse(address_json);
                text += "<tr class='view' ><td>" + parsed_obj.beds + "</td><td>" + parsed_obj.bath + "</td><td> $" + parsed_obj.price + "</td><td>" + parsed_obj.house_type + "</td><td>" + parsed_addresses.addr + ", " + parsed_addresses.city + ', ' + parsed_addresses.zipcode + "</td></tr>";
                text += '<tr class="fold"> <td colspan="5"><div class="fold-content"> <h3> Walking distance from CMU: ' + parsed_obj.walk.toFixed(2) + ' mi <br> Driving distance from CMU: ' + parsed_obj.drive.toFixed(2) + ' mi </h3></div></td></tr>';
              }
            text += "</tbody></table>"
            document.getElementById("demo").innerHTML = text;
            </script>
          </body>
          </html>
          
          